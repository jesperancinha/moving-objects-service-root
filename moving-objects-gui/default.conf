server {
  listen 80;
  listen [::]:80;

  root /usr/share/nginx/html;

  server_name _;

  location /login {
    proxy_pass http://127.0.0.1:80/;
  }

  location /login/ {
    proxy_pass http://127.0.0.1:80/;
  }

  location /login/callback/ {
    proxy_pass http://127.0.0.1:80/;
  }

  location /login/callback {
    proxy_pass http://127.0.0.1:80/;
  }

# NodeJS Metrics

  location /metrics {
    proxy_pass http://127.0.0.1:4000/;
  }

  location /metrics/ {
    proxy_pass http://127.0.0.1:4000/;
  }

# Aggregator OAuth2 Okta Service

  location /aggregator/webcams/ {
    proxy_pass http://192.168.0.11:8082/aggregator/webcams/;
    proxy_set_header Host $host;
  }

  location /aggregator/objects/ {
    proxy_pass http://192.168.0.11:8082/aggregator/objects/;
    proxy_set_header Host $host;
  }

  location /aggregator/objectswebcams/ {
    proxy_pass http://192.168.0.11:8082/aggregator/objectswebcams/;
    proxy_set_header Host $host;
  }

  location /aggregator/actuator/ {
    proxy_pass http://192.168.0.11:8082/aggregator/actuator/;
    proxy_set_header Host $host;
  }

  location /aggregator/webjars/swagger-ui/ {
    proxy_pass http://192.168.0.11:8082/aggregator/webjars/swagger-ui/;
    proxy_set_header Host $host;
  }

  location /aggregator/webjars/swagger-ui/* {
    proxy_pass http://192.168.0.11:8082/aggregator/webjars/swagger-ui/;
    proxy_set_header Host $host;
  }

  location /aggregator/v3/api-docs {
    proxy_pass http://192.168.0.11:8082/aggregator/v3/api-docs;
    proxy_set_header Host $host;
  }

# Objects JWT Service

  location /objects/webcams/ {
    proxy_pass http://192.168.0.17:8081/objects/webcams/;
  }

  location /objects/objects/ {
    proxy_pass http://192.168.0.17:8081/objects/objects/;
  }

  location /objects/actuator/ {
    proxy_pass http://192.168.0.17:8081/objects/actuator/;
  }

  location /objects/webjars/swagger-ui/ {
    proxy_pass http://192.168.0.17:8081/objects/webjars/swagger-ui/;
  }

  location /objects/webjars/swagger-ui/* {
    proxy_pass http://192.168.0.17:8081/objects/webjars/swagger-ui/;
  }

  location /objects/v3/api-docs {
    proxy_pass http://192.168.0.17:8081/objects/v3/api-docs;
  }
}