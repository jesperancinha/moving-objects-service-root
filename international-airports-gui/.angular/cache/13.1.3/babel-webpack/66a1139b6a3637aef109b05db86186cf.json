{"ast":null,"code":"import _classCallCheck from \"/Users/jofisaes/dev/src/jofisaes/international-airports-service-root/international-airports-gui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/jofisaes/dev/src/jofisaes/international-airports-service-root/international-airports-gui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { AirportCompleteService } from \"../../service/airport.complete.service\";\nimport { FormControl } from \"@angular/forms\";\nimport { of } from \"rxjs\";\nimport { map } from \"rxjs/operators\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../service/airport.complete.service\";\nimport * as i2 from \"@angular/material/form-field\";\nimport * as i3 from \"@angular/material/input\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/material/autocomplete\";\nimport * as i7 from \"@angular/material/core\";\nimport * as i8 from \"@angular/material/card\";\nimport * as i9 from \"@angular/material/list\";\n\nfunction WebCamsComponent_mat_hint_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-hint\");\n    i0.ɵɵtext(1, \"Autofilled!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction WebCamsComponent_mat_option_14_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-option\", 8);\n    i0.ɵɵlistener(\"click\", function WebCamsComponent_mat_option_14_Template_mat_option_click_0_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r9);\n      var option_r7 = restoredCtx.$implicit;\n      var ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.setCurrentAirport(option_r7);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var option_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r7.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", option_r7.name, \" \");\n  }\n}\n\nfunction WebCamsComponent_mat_card_17_mat_list_item_5_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-list-item\");\n    i0.ɵɵelementStart(1, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function WebCamsComponent_mat_card_17_mat_list_item_5_Template_button_click_1_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r13);\n      var webCam_r11 = restoredCtx.$implicit;\n      var ctx_r12 = i0.ɵɵnextContext(2);\n      return ctx_r12.selectWebCam(webCam_r11);\n    });\n    i0.ɵɵelement(2, \"img\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-label\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var webCam_r11 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", webCam_r11.webCamImage.iconUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(webCam_r11.title);\n  }\n}\n\nfunction WebCamsComponent_mat_card_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 9);\n    i0.ɵɵelementStart(1, \"mat-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵelementStart(4, \"mat-list\");\n    i0.ɵɵtemplate(5, WebCamsComponent_mat_card_17_mat_list_item_5_Template, 5, 2, \"mat-list-item\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r4.selectedAirport.name, \" - \", ctx_r4.selectedAirport.code, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.selectedAirport.webCams);\n  }\n}\n\nfunction WebCamsComponent_mat_card_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 9);\n    i0.ɵɵelement(1, \"img\", 12);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r5.selectedCam.webCamImage.previewUrl, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction WebCamsComponent_td_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1, \"Loading...\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport var WebCamsComponent = /*#__PURE__*/(function () {\n  var WebCamsComponent = /*#__PURE__*/function () {\n    function WebCamsComponent(airportService) {\n      _classCallCheck(this, WebCamsComponent);\n\n      this.airportService = airportService;\n      this.selectedRadius = \"10\";\n      this.airportFormControl = new FormControl();\n    }\n\n    _createClass(WebCamsComponent, [{\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        this.populateControls();\n      }\n    }, {\n      key: \"populateControls\",\n      value: function populateControls() {\n        this.loading = false;\n      }\n    }, {\n      key: \"radiusChanged\",\n      value: function radiusChanged(radius) {\n        var _this = this;\n\n        this.selectedRadius = radius;\n        this.filteredOptions = this.validateAndRunLiveFilter();\n        this.loading = true;\n        if (this.selectedAirport) this.airportService.getAirportPerCode(this.selectedAirport.code, this.selectedRadius).subscribe(function (airport) {\n          _this.selectedAirport.webCams = airport.webCams;\n          _this.loading = false;\n        });\n      }\n    }, {\n      key: \"validateAndRunLiveFilter\",\n      value: function validateAndRunLiveFilter() {\n        var _this2 = this;\n\n        if (this.validateAirportQuery()) {\n          return this.airportService.getAirportsPerTerm(this.searchTerm, this.selectedRadius).pipe(map(function (airports) {\n            _this2.loading = false;\n            return airports;\n          }));\n        }\n\n        return of([]);\n      }\n    }, {\n      key: \"validateAirportQuery\",\n      value: function validateAirportQuery() {\n        return this.searchTerm;\n      }\n    }, {\n      key: \"selectWebCam\",\n      value: function selectWebCam(webCam) {\n        this.selectedCam = webCam;\n      }\n    }, {\n      key: \"setCurrentAirport\",\n      value: function setCurrentAirport(airport) {\n        this.selectedAirport = airport;\n      }\n    }, {\n      key: \"searchTermChange\",\n      value: function searchTermChange(searchTerm) {\n        this.searchTerm = searchTerm;\n        this.loading = true;\n        this.filteredOptions = this.validateAndRunLiveFilter();\n      }\n    }]);\n\n    return WebCamsComponent;\n  }();\n\n  WebCamsComponent.ɵfac = function WebCamsComponent_Factory(t) {\n    return new (t || WebCamsComponent)(i0.ɵɵdirectiveInject(i1.AirportCompleteService));\n  };\n\n  WebCamsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: WebCamsComponent,\n    selectors: [[\"webcams-selector\"]],\n    decls: 22,\n    vars: 10,\n    consts: [[1, \"container\"], [\"matInput\", \"\", 3, \"value\", \"change\"], [\"selectedRadiusControl\", \"\"], [4, \"ngIf\"], [\"type\", \"text\", \"placeholder\", \"Pick one airport\", \"aria-label\", \"Number\", \"matInput\", \"\", 3, \"formControl\", \"matAutocomplete\", \"ngModelChange\"], [\"auto\", \"matAutocomplete\"], [3, \"value\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"double-card\", 4, \"ngIf\"], [3, \"value\", \"click\"], [1, \"double-card\"], [4, \"ngFor\", \"ngForOf\"], [\"mat-icon-button\", \"\", 3, \"click\"], [3, \"src\"]],\n    template: function WebCamsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        var _r14 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\");\n        i0.ɵɵelement(2, \"br\");\n        i0.ɵɵelementStart(3, \"mat-form-field\");\n        i0.ɵɵelementStart(4, \"mat-label\");\n        i0.ɵɵtext(5, \"Radius (Km)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"input\", 1, 2);\n        i0.ɵɵlistener(\"change\", function WebCamsComponent_Template_input_change_6_listener() {\n          i0.ɵɵrestoreView(_r14);\n\n          var _r0 = i0.ɵɵreference(7);\n\n          return ctx.radiusChanged(_r0.value);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(8, WebCamsComponent_mat_hint_8_Template, 2, 0, \"mat-hint\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(9, \"br\");\n        i0.ɵɵelementStart(10, \"mat-form-field\");\n        i0.ɵɵelementStart(11, \"input\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function WebCamsComponent_Template_input_ngModelChange_11_listener($event) {\n          return ctx.searchTermChange($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"mat-autocomplete\", null, 5);\n        i0.ɵɵtemplate(14, WebCamsComponent_mat_option_14_Template, 2, 2, \"mat-option\", 6);\n        i0.ɵɵpipe(15, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"br\");\n        i0.ɵɵtemplate(17, WebCamsComponent_mat_card_17_Template, 6, 3, \"mat-card\", 7);\n        i0.ɵɵtemplate(18, WebCamsComponent_mat_card_18_Template, 2, 1, \"mat-card\", 7);\n        i0.ɵɵelementStart(19, \"table\");\n        i0.ɵɵelementStart(20, \"tr\");\n        i0.ɵɵtemplate(21, WebCamsComponent_td_21_Template, 2, 0, \"td\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        var _r2 = i0.ɵɵreference(13);\n\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"value\", ctx.selectedRadius);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.radiusAutoFilled);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"formControl\", ctx.airportFormControl)(\"matAutocomplete\", _r2);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(15, 8, ctx.filteredOptions));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedAirport);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedCam);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n      }\n    },\n    directives: [i2.MatFormField, i2.MatLabel, i3.MatInput, i4.NgIf, i5.DefaultValueAccessor, i6.MatAutocompleteTrigger, i5.NgControlStatus, i5.FormControlDirective, i6.MatAutocomplete, i4.NgForOf, i2.MatHint, i7.MatOption, i8.MatCard, i9.MatList, i9.MatListItem],\n    pipes: [i4.AsyncPipe],\n    styles: [\".card[_ngcontent-%COMP%]{align-content:center}.double-card[_ngcontent-%COMP%]{max-width:500px;margin-bottom:50px;float:left}input[_ngcontent-%COMP%]{margin:8px}.filters[_ngcontent-%COMP%]{float:right}.center[_ngcontent-%COMP%]{text-align:center}td[_ngcontent-%COMP%]{padding:10px}  .custom-slider .ng5-slider .ng5-slider-bar{background:#0095ff;height:2px}  .custom-slider .ng5-slider .ng5-slider-pointer{width:32px;height:16px;top:auto;bottom:2px;background-color:#0095ff;border-top-left-radius:0;border-top-right-radius:0}  .custom-slider .ng5-slider .ng5-slider-pointer:after{display:none}  .custom-slider .ng5-slider .ng5-slider-bubble{bottom:14px}  .custom-slider .ng5-slider .ng5-slider-tick{width:1px;height:10px;margin-left:4px;border-radius:0;background:#ffe4d1;top:-1px;color:#0095ff}\"]\n  });\n  return WebCamsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}